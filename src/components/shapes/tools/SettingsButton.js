import { elementTools } from "@joint/core";
import { Runtime } from "@src/core/Runtime";

export const SettingsButton = elementTools.Button.extend({
  options: {
    x: "100%",
    y: 34,
    offset: {
      x: -16,
      y: -16,
    },

    markup: [
      {
        tagName: "rect",
        selector: "background",
        attributes: {
          width: 32,
          height: 32,
          fill: "#333045E5",
          rx: 6,
          ry: 6,
        },
      },
      {
        tagName: "path",
        selector: "dent",
        attributes: {
            d: "m 17 18 c 1.1046 0 2 -0.8954 2 -2 c 0 -1.1046 -0.8954 -2 -2 -2 c -1.1046 0 -2 0.8954 -2 2 c 0 1.1046 0.8954 2 2 2 z m 6.0545 0.4545 c -0.1089 0.2468 -0.1414 0.5206 -0.0932 0.786 c 0.0481 0.2654 0.1746 0.5103 0.3632 0.7031 l 0.0491 0.0491 c 0.1522 0.152 0.2729 0.3325 0.3552 0.5311 c 0.0824 0.1987 0.1248 0.4116 0.1248 0.6267 c 0 0.215 -0.0424 0.4279 -0.1248 0.6266 c -0.0823 0.1986 -0.203 0.3791 -0.3552 0.5311 c -0.1519 0.1521 -0.3324 0.2728 -0.5311 0.3552 c -0.1986 0.0823 -0.4115 0.1247 -0.6266 0.1247 c -0.215 0 -0.428 -0.0424 -0.6266 -0.1247 c -0.1987 -0.0824 -0.3791 -0.2031 -0.5311 -0.3552 l -0.0491 -0.0491 c -0.1928 -0.1886 -0.4377 -0.3152 -0.7032 -0.3633 c -0.2654 -0.0481 -0.5391 -0.0156 -0.7859 0.0933 c -0.242 0.1037 -0.4484 0.2759 -0.5937 0.4954 c -0.1454 0.2195 -0.2234 0.4768 -0.2245 0.74 v 0.1391 c 0 0.434 -0.1724 0.8502 -0.4793 1.1571 c -0.3068 0.3069 -0.7231 0.4793 -1.157 0.4793 c -0.434 0 -0.8503 -0.1724 -1.1571 -0.4793 c -0.3069 -0.3069 -0.4793 -0.7231 -0.4793 -1.1571 v -0.0736 c -0.0063 -0.2708 -0.094 -0.5335 -0.2516 -0.7538 c -0.1576 -0.2203 -0.3778 -0.3881 -0.632 -0.4817 c -0.2468 -0.1089 -0.5206 -0.1414 -0.786 -0.0932 c -0.2654 0.0481 -0.5103 0.1746 -0.7031 0.3632 l -0.0491 0.0491 c -0.152 0.1522 -0.3325 0.2729 -0.5311 0.3552 c -0.1987 0.0824 -0.4116 0.1248 -0.6267 0.1248 c -0.215 0 -0.4279 -0.0424 -0.6266 -0.1248 c -0.1986 -0.0823 -0.3791 -0.203 -0.5311 -0.3552 c -0.1521 -0.1519 -0.2728 -0.3324 -0.3552 -0.5311 c -0.0823 -0.1986 -0.1247 -0.4115 -0.1247 -0.6266 c 0 -0.215 0.0424 -0.428 0.1247 -0.6266 c 0.0824 -0.1987 0.2031 -0.3791 0.3552 -0.5311 l 0.0491 -0.0491 c 0.1886 -0.1928 0.3152 -0.4377 0.3633 -0.7032 c 0.0481 -0.2654 0.0156 -0.5391 -0.0933 -0.7859 c -0.1037 -0.242 -0.2759 -0.4484 -0.4954 -0.5937 c -0.2195 -0.1454 -0.4768 -0.2234 -0.74 -0.2245 h -0.1391 c -0.434 0 -0.8502 -0.1724 -1.1571 -0.4793 c -0.3069 -0.3068 -0.4793 -0.7231 -0.4793 -1.157 c 0 -0.434 0.1724 -0.8503 0.4793 -1.1571 c 0.3069 -0.3069 0.7231 -0.4793 1.1571 -0.4793 h 0.0736 c 0.2708 -0.0063 0.5335 -0.094 0.7538 -0.2516 c 0.2203 -0.1576 0.3881 -0.3778 0.4817 -0.632 c 0.1089 -0.2468 0.1414 -0.5206 0.0932 -0.786 c -0.0481 -0.2654 -0.1746 -0.5103 -0.3632 -0.7031 l -0.0491 -0.0491 c -0.1522 -0.152 -0.2729 -0.3325 -0.3552 -0.5311 c -0.0824 -0.1987 -0.1248 -0.4116 -0.1248 -0.6267 c 0 -0.215 0.0424 -0.4279 0.1248 -0.6266 c 0.0823 -0.1986 0.203 -0.3791 0.3552 -0.5311 c 0.1519 -0.1521 0.3324 -0.2728 0.5311 -0.3552 c 0.1986 -0.0823 0.4115 -0.1247 0.6266 -0.1247 c 0.215 0 0.428 0.0424 0.6266 0.1247 c 0.1987 0.0824 0.3791 0.2031 0.5311 0.3552 l 0.0491 0.0491 c 0.1928 0.1886 0.4377 0.3152 0.7032 0.3633 c 0.2654 0.0481 0.5391 0.0156 0.7859 -0.0933 h 0.0655 c 0.2419 -0.1037 0.4483 -0.2759 0.5937 -0.4954 c 0.1454 -0.2195 0.2234 -0.4768 0.2244 -0.74 v -0.1391 c 0 -0.434 0.1724 -0.8502 0.4793 -1.1571 c 0.3069 -0.3069 0.7231 -0.4793 1.1571 -0.4793 c 0.434 0 0.8502 0.1724 1.1571 0.4793 c 0.3069 0.3069 0.4793 0.7231 0.4793 1.1571 v 0.0736 c 0.001 0.2633 0.079 0.5205 0.2244 0.74 c 0.1454 0.2195 0.3518 0.3917 0.5937 0.4955 c 0.2468 0.1089 0.5206 0.1414 0.786 0.0932 c 0.2654 -0.0481 0.5103 -0.1746 0.7031 -0.3632 l 0.0491 -0.0491 c 0.152 -0.1522 0.3325 -0.2729 0.5311 -0.3552 c 0.1987 -0.0824 0.4116 -0.1248 0.6267 -0.1248 c 0.215 0 0.4279 0.0424 0.6266 0.1248 c 0.1986 0.0823 0.3791 0.203 0.5311 0.3552 c 0.1521 0.1519 0.2728 0.3324 0.3552 0.5311 c 0.0823 0.1986 0.1247 0.4115 0.1247 0.6266 c 0 0.215 -0.0424 0.428 -0.1247 0.6266 c -0.0824 0.1987 -0.2031 0.3791 -0.3552 0.5311 l -0.0491 0.0491 c -0.1886 0.1928 -0.3152 0.4377 -0.3633 0.7032 c -0.0481 0.2654 -0.0156 0.5391 0.0933 0.7859 v 0.0655 c 0.1037 0.2419 0.2759 0.4483 0.4954 0.5937 c 0.2195 0.1454 0.4768 0.2234 0.74 0.2244 h 0.1391 c 0.434 0 0.8502 0.1724 1.1571 0.4793 c 0.3069 0.3069 0.4793 0.7231 0.4793 1.1571 c 0 0.434 -0.1724 0.8502 -0.4793 1.1571 c -0.3069 0.3069 -0.7231 0.4793 -1.1571 0.4793 h -0.0736 c -0.2633 0.001 -0.5205 0.079 -0.74 0.2244 c -0.2195 0.1454 -0.3917 0.3518 -0.4955 0.5937 z",
            fill: "none",
            strokeLinecap: "round",
            stroke: "#FFFFFF",
            strokeWidth: 1.5,
            pointerEvents: "none",
        },
      },
    ],

    action: function(_evt, elementView, _buttonView) {
      const runtime = new Runtime();
      const { model } = elementView;
      runtime.get("objects.blueprintAction").openNodeSettings(model.id);
    }
  },
});
